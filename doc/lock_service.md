# LockService

Используется для ограничения одновременно запущенных участков кода. 
Это бывает необходимо в ситуациях когда есть жесткие лимиты от внешнего апи на количество одновременных обращений,
или в ситуациях когда мы работаем с объектом для которого чувствительны одновременные изменения, например бюджет аккаунта.

## Описание параметров
key: Ключ, который определяет уникальность выполняемого участка кода.

ttl_in_sec: Сколько времени ключ будет жить в Redis'e. По истечении времени ключ удалится и начнется выполнение следующего участка кода. Необходимо указать время за которое участок кода должен успеть выполниться.

timeout_in_sec: Сколько времени функция lock будет пытаться поставить участок кода на выполнение. По истечении времени вызовется исключение. Слишком большое значение может привести к зависанию кода.

queue_width: Максимально возможное количество одновременно запущенных участков кода


```python
from metasdk import MetaApp

META = MetaApp()

with META.LockService.lock(key='do_something', ttl_in_sec=60, timeout_in_sec=5):
    # do_something()
```

